{%load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Travela - Tourism Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600&family=Roboto&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/lightbox/css/lightbox.min.css' %}" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <style>
        /* Umumiy modal stillari */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
    
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto; /* Yuqoridan biroz pastroqda joylashsin */
            padding: 20px;
            border: 1px solid #888;
            width: 300px; /* Kichikroq karta uchun eni */
            border-radius: 10px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    
        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
    
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
        }
    
        /* Profil karta stillari */
        .profile-card {
            text-align: center;
        }
    
        .profile-header {
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 15px;
        }
    
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #ddd;
            margin: 0 auto 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    
        .profile-avatar i {
            color: #666;
            font-size: 2.5em;
        }
    
        .profile-name {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: #333;
        }
    
        .profile-status {
            color: #5cb85c;
            font-size: 0.9em;
        }
    
        .profile-status i {
            margin-right: 5px;
        }
    
        .profile-details {
            padding: 15px 0;
        }
    
        .detail-item {
            padding: 8px 0;
            border-bottom: 1px dotted #eee;
        }
    
        .detail-item:last-child {
            border-bottom: none;
        }
    
        .detail-label {
            font-weight: bold;
            color: #555;
        }
    
        .detail-value {
            color: #777;
        }
    
        .profile-actions {
            margin-top: 20px;
        }
    
        .action-button {
            background-color: #ffc107; /* Sariq rang */
            color: #333;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }
    
        .action-button:hover {
            background-color: #e0a800;
        }
    
        /* Tahrirlash formasi stillari */
        .edit-form {
            text-align: left;
        }
    
        .edit-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
    
        .edit-form input[type="number"],
        .edit-form input[type="text"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
        }
    
        .edit-form button {
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }
    
        .edit-form button:hover {
            background-color: #1e7e34;
        }
        .profile-email {
            font-size: 0.9em;
            color: #777;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Topbar Start -->
    <div class="container-fluid bg-primary px-5 d-none d-lg-block">
            <div class="row gx-0">
                <div class="col-lg-8 text-center text-lg-start mb-2 mb-lg-0">
                    <div class="d-inline-flex align-items-center" style="height: 45px;">
                        <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2" href=""><i class="fab fa-twitter fw-normal"></i></a>
                        <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2" href=""><i class="fab fa-facebook-f fw-normal"></i></a>
                        <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2" href=""><i class="fab fa-linkedin-in fw-normal"></i></a>
                        <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2" href=""><i class="fab fa-instagram fw-normal"></i></a>
                        <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle" href=""><i class="fab fa-youtube fw-normal"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 text-center text-lg-end">
                    <div class="d-inline-flex align-items-center" style="height: 45px;">
                        {% if not user.is_authenticated %}
                        <a href="{%url 'register'%}"><small class="me-3 text-light"><i class="fa fa-user me-2"></i>Ro'yxatdan o'tish</small></a>
                        <a href="{%url 'login'%}"><small class="me-3 text-light"><i class="fa fa-sign-in-alt me-2"></i>Kirish</small></a>
                        {%endif%}
                        <div class="dropdown">
                            <a href="#" class="dropdown-toggle text-light" data-bs-toggle="dropdown"><small><i class="fa fa-home me-2"></i>Uy</small></a>
                            <div class="dropdown-menu rounded">
                                <a href="#" class="dropdown-item" id="showProfileModal"><i class="fas fa-user-alt me-2"></i>Mening profilim</a>
                                <a href="{%url 'logout'%}" class="dropdown-item"><i class="fas fa-power-off me-2"></i>Chiqish</a>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <!-- Topbar End -->


    <!-- Navbar & Hero Start -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
            <a href="" class="navbar-brand p-0">
                <h1 class="m-0"><i class="fa fa-map-marker-alt me-3"></i>Dunyo Tour</h1>
                <!-- <img src="img/logo.png" alt="Logo"> -->
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="{%url 'home'%}" class="nav-item nav-link active">Bosh sahifa</a>
                    <a href="{%url 'tours'%}" class="nav-item nav-link">Ekskursiyalar</a>
                    <a href="{%url 'destination'%}" class="nav-item nav-link">Shaharlar</a>
                    <a href="{%url 'countrys'%}" class="nav-item nav-link">Davlatlar</a>
                    <a href="{%url 'gallery'%}" class="nav-item nav-link">Galeriya</a>
                    <a href="contact.html" class="nav-item nav-link">Bog'lanish</a>
                </div>
                {%if user.is_authenticated%}
                <a href="" class="btn btn-primary rounded-pill py-2 px-4 ms-lg-4">{{user.username}}</a>
                {%endif%}
            </div>
        </nav>
    </div>
    <!-- Navbar & Hero End -->


    <!-- Header Start -->
    <div class="container-fluid bg-breadcrumb" style="background-image: url('{% static "img/packages-1.jpg" %}'); background-size: cover; background-repeat: no-repeat;">
        <div class="container text-center py-5" style="max-width: 900px;">
            <h3 class="text-white display-3 mb-4">Turlar</h1>
            {% comment %} <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item"><a href="{%url 'home'%}">Bosh sahifa</a></li>
                <li class="breadcrumb-item"><a href="#">Turlar</a></li>
            </ol>     {% endcomment %}
        </div>
    </div>
    <!-- Header End -->


    <!-- Blog Start -->
    <div class="container-fluid py-5">
        <div class="container py-5">
            <div class="row">
                <div class="col-lg-8">
                    <!-- Blog Detail Start -->
                    <div class="pb-3">
                        <div class="blog-item">
                            <div class="position-relative">
                                <img class="img-fluid w-100" src="{{tour.image.url}}" alt="">
                                <div class="blog-date">
                                    {% comment %} <h6 class="font-weight-bold mb-n1">01</h6> {% endcomment %}
                                    {% comment %} <small class="text-white text-uppercase">Jan</small> {% endcomment %}
                                </div>
                            </div>
                        </div>
                        <div class="bg-white mb-3" style="padding: 30px;">
                            <div class="d-flex mb-3">
                                <a class="text-primary text-uppercase text-decoration-none" href="">Tavsif</a>
                                <span class="text-primary px-2">|</span>
                                <a class="text-primary text-uppercase text-decoration-none" href="">{{tour.name}}</a>
                            </div>
                            <p>{{ tour.description|safe }}</p>
                            
                        </div>
                    </div>
                    <!-- Blog Detail End -->
    
                    <!-- Comment List Start -->
                    <div class="bg-white" style="padding: 30px; margin-bottom: 30px;">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Fikirlar</h4>
                        <div class="media mb-4">
                            <img src="img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
                            <div class="media-body">
                                <h6><a href="">John Doe</a> <small><i>01 Jan 2045</i></small></h6>
                                <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor labore
                                    accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed eirmod ipsum.
                                    Gubergren clita aliquyam consetetur sadipscing, at tempor amet ipsum diam tempor
                                    consetetur at sit.</p>
                                <button class="btn btn-sm btn-outline-primary">Reply</button>
                            </div>
                        </div>
                        {% comment %} <div class="media">
                            <img src="img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
                            <div class="media-body">
                                <h6><a href="">John Doe</a> <small><i>01 Jan 2045</i></small></h6>
                                <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor labore
                                    accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed eirmod ipsum.
                                    Gubergren clita aliquyam consetetur sadipscing, at tempor amet ipsum diam tempor
                                    consetetur at sit.</p>
                                <button class="btn btn-sm btn-outline-primary">Reply</button>
                                <div class="media mt-4">
                                    <img src="img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1"
                                        style="width: 45px;">
                                    <div class="media-body">
                                        <h6><a href="">John Doe</a> <small><i>01 Jan 2045</i></small></h6>
                                        <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor
                                            labore accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed
                                            eirmod ipsum. Gubergren clita aliquyam consetetur sadipscing, at tempor amet
                                            ipsum diam tempor consetetur at sit.</p>
                                        <button class="btn btn-sm btn-outline-primary">Reply</button>
                                    </div>
                                </div>
                            </div>
                        </div> {% endcomment %}
                    </div>
                    <!-- Comment List End -->
    
                    <!-- Comment Form Start -->
                    <div class="bg-white mb-3" style="padding: 30px;">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Fikir qoldirish</h4>
                        <form>
                            <div class="form-group">
                                <label for="name">Name *</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" class="form-control" id="email">
                            </div>
                            <div class="form-group">
                                <label for="website">Website</label>
                                <input type="url" class="form-control" id="website">
                            </div>
    
                            <div class="form-group">
                                <label for="message">Message *</label>
                                <textarea id="message" cols="30" rows="5" class="form-control"></textarea>
                            </div>
                            <div class="form-group mb-0">
                                <input type="submit" value="Leave a comment"
                                    class="btn btn-primary font-weight-semi-bold py-2 px-3">
                            </div>
                        </form>
                    </div>
                    <!-- Comment Form End -->
                </div>
                <div class="col-lg-4 mt-5 mt-lg-0">
                    <!-- Author Bio -->
                    {% comment %} <div class="d-flex flex-column text-center bg-white mb-5 py-5 px-4">
                        <img src="img/user.jpg" class="img-fluid mx-auto mb-3" style="width: 100px;">
                        <h3 class="text-primary mb-3">John Doe</h3>
                        <p>Conset elitr erat vero dolor ipsum et diam, eos dolor lorem, ipsum sit no ut est  ipsum erat kasd amet elitr</p>
                        <div class="d-flex justify-content-center">
                            <a class="text-primary px-2" href="">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a class="text-primary px-2" href="">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a class="text-primary px-2" href="">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a class="text-primary px-2" href="">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a class="text-primary px-2" href="">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div> {% endcomment %}
    
                    <!-- Search Form -->
                    {% comment %} <div class="mb-5">
                        <div class="bg-white" style="padding: 30px;">
                            <div class="input-group">
                                <input type="text" class="form-control p-4" placeholder="Keyword">
                                <div class="input-group-append">
                                    <span class="input-group-text bg-primary border-primary text-white"><i
                                            class="fa fa-search"></i></span>
                                </div>
                            </div>
                        </div>
                    </div> {% endcomment %}

                    <!-- Category List -->
                    <div class="mb-5">
                        {% comment %} <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Categories</h4> {% endcomment %}
                        <div class="bg-white" style="padding: 30px;">
                            <ul class="list-inline m-0">
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    {% comment %} <a class="text-dark" href="#">
                                        <i class="fa fa-angle-right text-primary mr-2"></i>{{ tour.category.all|join:", " }}
                                    </a> {% endcomment %}
                                    {% comment %} <span class="badge badge-primary badge-pill">150</span> {% endcomment %}
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#">
                                    Nomi ---<i class="fa fa-angle-right text-primary mr-2"></i>{{ tour.name }}
                                    </a>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#">
                                    Narxi ---<i class="fa fa-angle-right text-primary mr-2"></i>${{ tour.price }}
                                    </a>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#">
                                    Qit'a ---<i class="fa fa-angle-right text-primary mr-2"></i>{{ tour.continent }}
                                    </a>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#">
                                    Davlat ---<i class="fa fa-angle-right text-primary mr-2"></i>{{tour.countries}}
                                    </a>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#">
                                        SHahar ---<i class="fa fa-angle-right text-primary mr-2"></i>{{ tour.destinations }}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>                    
    
                    {% comment %} <!-- Recent Post -->
                    <div class="mb-5">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Recent Post</h4>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                    </div>
    
                    <!-- Tag Cloud -->
                    <div class="mb-5">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Tag Cloud</h4>
                        <div class="d-flex flex-wrap m-n1">
                            <a href="" class="btn btn-light m-1">Design</a>
                            <a href="" class="btn btn-light m-1">Development</a>
                            <a href="" class="btn btn-light m-1">Marketing</a>
                            <a href="" class="btn btn-light m-1">SEO</a>
                            <a href="" class="btn btn-light m-1">Writing</a>
                            <a href="" class="btn btn-light m-1">Consulting</a>
                        </div>
                    </div> {% endcomment %}
                </div>
            </div>
        </div>
    </div>
    <!-- Blog End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-white-50 py-5 px-sm-3 px-lg-5" style="margin-top: 90px;">
        <div class="row pt-5">
            <div class="col-lg-3 col-md-6 mb-5">
                <a href="" class="navbar-brand">
                    <h1 class="text-primary"><span class="text-white">TRAVEL</span>ER</h1>
                </a>
                <p>Sed ipsum clita tempor ipsum ipsum amet sit ipsum lorem amet labore rebum lorem ipsum dolor. No sed vero lorem dolor dolor</p>
                <h6 class="text-white text-uppercase mt-4 mb-3" style="letter-spacing: 5px;">Follow Us</h6>
                <div class="d-flex justify-content-start">
                    <a class="btn btn-outline-primary btn-square mr-2" href="#"><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-outline-primary btn-square mr-2" href="#"><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-outline-primary btn-square mr-2" href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a class="btn btn-outline-primary btn-square" href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;">Our Services</h5>
                <div class="d-flex flex-column justify-content-start">
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>About</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Destination</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Services</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Packages</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Guides</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Testimonial</a>
                    <a class="text-white-50" href="#"><i class="fa fa-angle-right mr-2"></i>Blog</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;">Usefull Links</h5>
                <div class="d-flex flex-column justify-content-start">
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>About</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Destination</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Services</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Packages</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Guides</a>
                    <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Testimonial</a>
                    <a class="text-white-50" href="#"><i class="fa fa-angle-right mr-2"></i>Blog</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;">Contact Us</h5>
                <p><i class="fa fa-map-marker-alt mr-2"></i>123 Street, New York, USA</p>
                <p><i class="fa fa-phone-alt mr-2"></i>+012 345 67890</p>
                <p><i class="fa fa-envelope mr-2"></i>info@example.com</p>
                <h6 class="text-white text-uppercase mt-4 mb-3" style="letter-spacing: 5px;">Newsletter</h6>
                <div class="w-100">
                    <div class="input-group">
                        <input type="text" class="form-control border-light" style="padding: 25px;" placeholder="Your Email">
                        <div class="input-group-append">
                            <button class="btn btn-primary px-3">Sign Up</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-dark text-white border-top py-4 px-sm-3 px-md-5" style="border-color: rgba(256, 256, 256, .1) !important;">
        <div class="row">
            <div class="col-lg-6 text-center text-md-left mb-3 mb-md-0">
                <p class="m-0 text-white-50">Copyright &copy; <a href="#">Domain</a>. All Rights Reserved.</a>
                </p>
            </div>
            <div class="col-lg-6 text-center text-md-right">
                <p class="m-0 text-white-50">Designed by <a href="https://htmlcodex.com">HTML Codex</a>
                </p>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment-timezone.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"></script>

    <!-- Contact Javascript File -->
    <script src="{% static 'mail/jqBootstrapValidation.min.js' %}"></script>
    <script src="{% static 'mail/contact.js' %}"></script>

    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
    <div id="profileModal" class="modal">
        <div class="modal-content profile-card">
            <span class="close-button">&times;</span>
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user fa-3x"></i>
                </div>
                <h3 class="profile-name">{{ user.username }}</h3>
                <p class="profile-email">{{ user.email }}</p>
                {% comment %} <span class="profile-status"><i class="fas fa-check-circle"></i> Foydalanuvchi obunaga ega</span> {% endcomment %}
            </div>
            <div class="profile-details">
                <div class="detail-item">
                    <span class="detail-label">Telefon:</span>
                    <span class="detail-value" id="profil_telefon_card">{% if user.userprofile.telefon_raqami %}{{ user.userprofile.telefon_raqami }}{% else %}Yo'q{% endif %}</span>
                    <div class="detail-item">
                        <span class="detail-label">Yosh:</span>
                        <span class="detail-value" id="profil_yosh_card">{% if user.userprofile.yosh %}{{ user.userprofile.yosh }}{% else %}Ma'lumot yo'q{% endif %}</span>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="action-button edit-button" id="editProfileBtn"><i class="fas fa-edit"></i> Tahrirlash</button>
                    {% comment %} <button class="action-button message-button"><i class="fas fa-envelope"></i> Xabar</button>
                    <button class="action-button settings-button"><i class="fas fa-cog"></i> Sozlamalar</button> {% endcomment %}
                </div>
            </div>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content edit-form">
            <span class="close-button">&times;</span>
            <h2>Profilni tahrirlash</h2>
            <label for="yosh_edit">Yosh:</label>
            <input type="number" id="yosh_edit" name="yosh">

            <label for="telefon_edit">Telefon raqami:</label>
            <input type="text" id="telefon_edit" name="telefon">

            <button type="button" id="saqlash_edit">Saqlash</button>
        </div>
    </div>

    <script>
        // Modal oynalarni boshqarish uchun JavaScript
        const profileModal = document.getElementById("profileModal");
        const showProfileModalBtn = document.getElementById("showProfileModal");
        const closeButtons = document.querySelectorAll(".close-button");
        const editProfileBtn = document.getElementById("editProfileBtn");
        const editModal = document.getElementById("editModal");
        const saqlashEditBtn = document.getElementById("saqlash_edit");
        const yoshEditInput = document.getElementById("yosh_edit");
        const telefonEditInput = document.getElementById("telefon_edit");
        const profilTelefonCard = document.getElementById("profil_telefon_card");

        showProfileModalBtn.addEventListener("click", function() {
            profileModal.style.display = "block";
        });

        closeButtons.forEach(button => {
            button.addEventListener("click", function() {
                profileModal.style.display = "none";
                editModal.style.display = "none";
            });
        });

        window.addEventListener("click", function(event) {
            if (event.target == profileModal || event.target == editModal) {
                profileModal.style.display = "none";
                editModal.style.display = "none";
            }
        });

        editProfileBtn.addEventListener("click", function() {
            profileModal.style.display = "none";
            editModal.style.display = "block";
            // Agar foydalanuvchida telefon raqami bo'lsa, tahrirlash formasiga joylash
            if (profilTelefonCard.textContent !== "Yo'q") {
                telefonEditInput.value = profilTelefonCard.textContent;
                // Agar yosh ham bo'lsa, uni ham joylashtirish mumkin
                // Masalan: yoshEditInput.value = document.getElementById("profil_yosh_card").textContent;
            }
        });

        saqlashEditBtn.addEventListener("click", function() {
            const yosh = yoshEditInput.value;
            const telefon = telefonEditInput.value;

            const formData = new FormData();
            formData.append('yosh', yosh);
            formData.append('telefon_raqami', telefon); // Modelda telefon_raqami deb nomlangan

            fetch("{% url 'profile' %}", {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                },
                body: formData,
            })
            .then(response => response.json())
            .then(data => {
                console.log('Muvaffaqiyat:', data);
                if (data.success) {
                    if (telefon) {
                        profilTelefonCard.textContent = telefon;
                    }
                    // Yoshni ham yangilash (agar profil kartada ko'rsatilgan bo'lsa)
                    const profilYoshCard = document.getElementById("profil_yosh_card");
                    if (profilYoshCard && yosh) {
                        profilYoshCard.textContent = yosh;
                    }
                    editModal.style.display = "none";
                    profileModal.style.display = "block";
                } else if (data.error) {
                    console.error('Xatolik:', data.error);
                    alert('Ma\'lumotlarni saqlashda xatolik yuz berdi.');
                }
            })
            .catch((error) => {
                console.error('Tarmoq xatoligi:', error);
                alert('Tarmoq xatoligi yuz berdi.');
            });
        });
    </script>
</body>

</html>